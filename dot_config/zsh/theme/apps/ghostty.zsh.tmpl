# Ghostty theme integration

[[ ! -d "{{ .chezmoi.homeDir }}/.config/ghostty" ]] && return

local theme_dir="{{ .chezmoi.homeDir }}/.config/ghostty/themes"
mkdir -p "$theme_dir"

local ghostty_content="# Ghostty theme: $_DOTFILES_THEME_NAME
background = ${bg#\#}
foreground = ${fg#\#}

# Normal colors
palette = 0=$black
palette = 1=$red
palette = 2=$green
palette = 3=$yellow
palette = 4=$blue
palette = 5=$magenta
palette = 6=$cyan
palette = 7=$white

# Bright colors
palette = 8=$bright_black
palette = 9=$bright_red
palette = 10=$bright_green
palette = 11=$bright_yellow
palette = 12=$bright_blue
palette = 13=$bright_magenta
palette = 14=$bright_cyan
palette = 15=$bright_white"

if [[ ! -f "$theme_dir/current.conf" ]] || [[ "$(< "$theme_dir/current.conf")" != "$ghostty_content" ]]; then
  print -r -- "$ghostty_content" > "$theme_dir/current.conf"
fi
