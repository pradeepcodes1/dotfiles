#!/bin/bash
set -e

# Load nix environment
if [ -f /nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh ]; then
  . /nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh
elif [ -f "$HOME/.nix-profile/etc/profile.d/nix.sh" ]; then
  . "$HOME/.nix-profile/etc/profile.d/nix.sh"
fi

# uv tool setup
if command -v uv >/dev/null 2>&1; then
  uv tool update-shell 2>/dev/null || true
fi

# mise setup
if command -v mise >/dev/null 2>&1; then
  mise install 2>/dev/null || true
  mise upgrade 2>/dev/null || true
fi

# Yazi flavors for theme system
if command -v ya >/dev/null 2>&1; then
  echo "Installing yazi flavors..."
  ya pkg add yazi-rs/flavors:catppuccin-mocha 2>/dev/null || true
  ya pkg add yazi-rs/flavors:catppuccin-latte 2>/dev/null || true
  ya pkg add marcosvnmelo/kanagawa-dragon 2>/dev/null || true
  ya pkg add dangooddd/kanagawa 2>/dev/null || true
  ya pkg add muratoffalex/kanagawa-lotus 2>/dev/null || true
  ya pkg add bennyyip/gruvbox-dark 2>/dev/null || true
  ya pkg add Chromium-3-Oxide/everforest-medium 2>/dev/null || true
fi
